## Урок 3 — Чтение данных из программ (контрактов)

Следующим логичным и очень важным шагом будет извлечение и декодирование данных из аккаунтов, управляемых смарт-контрактами.

### Вступление: PDA

**PDA (Program Derived Address)** — специальный аккаунт, чьи ключи не имеют приватного ключа и могут быть созданными только программой.  
Они используются для хранения состояния программы: данных пользователя, NFT, пулов, ордеров и т.п.

PDA вычисляется программно и является детерминированным: одна и та же программа всегда создаёт один и тот же PDA при одинаковых входных данных.

Свойства PDA:

- не имеют владельца с приватным ключом (их нельзя подписывать вручную)
- подписываются программой, которая их «владеет»
- часто используются для хранения данных внутри dApp

---

### Зачем

- Большинство dApps работают с PDA, а не с обычными кошельками
- Умение декодировать данные аккаунтов критично при создании фронтенда, анализе dApp и аудите
- Это приближает к следующему этапу — вызову методов программ
- Почти все смарт-контракты хранят состояние во внешних аккаунтах — ты не поймёшь, как работает программа, не умея читать их
- Позволяет исследовать чужие программы и понимать их логику без исходного кода
- Это основа для создания UI: без чтения данных невозможно отобразить состояние (балансы, списки, владение и т.п.)
- Помогает в тестировании — можно проверять, корректно ли программа сохраняет и обновляет данные
- Невозможно построить полноценный indexer или аналитический сервис без этого навыка
- Необходим для создания оффчейн-ботов, которые мониторят и реагируют на изменения в программах
- Это требование большинства реальных задач во фрилансе и работе в команде Solana-разработчиков

---

---

### Задача

Напиши скрипт, который:

1. Подключается к Devnet
2. Принимает публичный ключ аккаунта, созданного программой
3. Получает `accountInfo` и:
   - Проверяет, существует ли аккаунт
   - Показывает `owner` (должен быть адрес программы)
   - Показывает `data.length` (чтобы понять, что есть данные)
   - Показывает `executable` (можно ли выполнить как программу)
   - Показывает `rentEpoch` (эпоха, до которой аренда оплачена)
   - Декодирует `account.data` (если структура известна)
   - Выводит результат в читаемом виде

### Необходимая программная база

Чтобы выполнить этот урок, разработчику нужно понимать следующие фундаментальные концепции программирования:

#### Основы JavaScript / TypeScript:

- Переменные (`let`, `const`)
- Типы данных (строки, числа, массивы, объекты)
- Условия (`if`, `else`)
- Циклы (`for`, `while`, `for...of`)
- Функции (в том числе стрелочные: `() => {}`)
- Асинхронность (`async`, `await`, `Promise`)
- Модули и импорт/экспорт (`import`, `export`)
- Работа с объектами и деструктуризация (`const { value } = obj`)

#### Работа с Node.js:

- Установка зависимостей через `npm` или `yarn`
- Запуск скриптов (`node`, `ts-node`)
- Использование библиотек, таких как `@solana/web3.js`

#### Специфика Solana:

- Что такое `PublicKey`, `Connection`, `AccountInfo`
- Как подключаться к Devnet
- Как получать данные об аккаунте
- Базовое понимание PDA и работы программ
